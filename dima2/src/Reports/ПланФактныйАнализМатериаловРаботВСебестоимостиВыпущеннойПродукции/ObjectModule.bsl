#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

#Область ОбработчикиСобытий
	
Процедура ПриКомпоновкеРезультата(ДокументРезультат, ДанныеРасшифровки, СтандартнаяОбработка)
	
	
	
	ТекстЗапроса = СхемаКомпоновкиДанных.НаборыДанных.Результат.Элементы.План.Запрос;
	
	ТекстЗапроса = СтрЗаменить(
		ТекстЗапроса, 
		"&ТекстЗапросаКоэффициентУпаковки", 
		Справочники.УпаковкиЕдиницыИзмерения.ТекстЗапросаКоэффициентаУпаковки(
			"ВЫРАЗИТЬ(МатериалыИУслугиПлан.Упаковка КАК Справочник.УпаковкиЕдиницыИзмерения)", 
			"МатериалыИУслугиПлан.Номенклатура"));
			
	СхемаКомпоновкиДанных.НаборыДанных.Результат.Элементы.План.Запрос = ТекстЗапроса;
	
	СегментыСервер.ВключитьОтборПоСегментуНоменклатурыВСКД(КомпоновщикНастроек);
	
	ПараметрВидЦены = КомпоновщикНастроек.Настройки.ПараметрыДанных.НайтиЗначениеПараметра(Новый ПараметрКомпоновкиДанных("ВидЦеныПлановойСтоимостиМатериаловРабот"));
	Если ПараметрВидЦены <> Неопределено Тогда
		ПараметрВидЦены.Значение = Константы.ВидЦеныПлановойСтоимостиМатериаловРабот.Получить();
		ПараметрВидЦены.Использование = Истина;
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти 

#КонецЕсли