
#Область СлужебныйПрограммныйИнтерфейс


// Вызывается в обработчике события "ПриИзменении" поля - строкового представления 
// реквизита "ДатаПолученияДохода", таблицы "Взносы". 
//
// Параметры:
//	ДанныеТекущейСтроки - данные текущей строки таблицы "Взносы".
// 	ИмяПоляДатаПолученияДохода - имя реквизита содержащего дату получения дохода в таблице взносов.
// 	ИмяПоляПредставление - имя реквизита, содержащего строковое представление даты получения дохода.
//	Модифицированность - булево - признак модифицированности формы.
//
Процедура ВзносыДатаПолученияДоходаСтрокойПриИзменении(ДанныеТекущейСтроки, ИмяПоляДатаПолученияДохода, ИмяПоляПредставление, Модифицированность) Экспорт 
	ЗарплатаКадрыКлиент.ВводМесяцаПриИзменении(ДанныеТекущейСтроки, ИмяПоляДатаПолученияДохода, ИмяПоляПредставление, Модифицированность);
	Если ЗначениеЗаполнено(ДанныеТекущейСтроки[ИмяПоляДатаПолученияДохода]) Тогда
		ДанныеТекущейСтроки[ИмяПоляДатаПолученияДохода] = УчетСтраховыхВзносовКлиентСервер.ДатаПолученияДохода(ДанныеТекущейСтроки[ИмяПоляДатаПолученияДохода]);
	КонецЕсли;	
КонецПроцедуры	

// Вызывается в обработчике события "НачалоВыбора" поля - строкового представления 
// реквизита "ДатаПолученияДохода", таблицы "Взносы". 
//
// Параметры:
//	Форма
//	ДанныеТекущейСтроки - данные текущей строки таблицы "Взносы".
// 	ИмяПоляДатаПолученияДохода - имя реквизита содержащего дату получения дохода в таблице взносов.
// 	ИмяПоляПредставление - имя реквизита, содержащего строковое представление даты получения дохода.
//
Процедура ВзносыДатаПолученияДоходаСтрокойНачалоВыбора(Форма, ДанныеТекущейСтроки, ИмяПоляДатаПолученияДохода, ИмяПоляПредставление) Экспорт 
	
	ПараметрыОповещения = Новый Структура;
	ПараметрыОповещения.Вставить("ДанныеТекущейСтроки", ДанныеТекущейСтроки);
	ПараметрыОповещения.Вставить("ИмяПоляДатаПолученияДохода", ИмяПоляДатаПолученияДохода);
	ПараметрыОповещения.Вставить("ИмяПоляПредставление", ИмяПоляПредставление);
	
	Оповещение = Новый ОписаниеОповещения("ВзносыДатаПолученияДоходаСтрокойНачалоВыбораЗавершение", ЭтотОбъект, ПараметрыОповещения);	
	
	ЗарплатаКадрыКлиент.ВводМесяцаНачалоВыбора(
		Форма, 
		ДанныеТекущейСтроки,                                                 
		ИмяПоляДатаПолученияДохода, 
		ИмяПоляПредставление, ,
		Оповещение);
		
КонецПроцедуры

// Вызывается в обработчике события "Регулирование" поля - строкового представления 
// реквизита "ДатаПолученияДохода", таблицы "Взносы". 
//
// Параметры:
//	ДанныеТекущейСтроки - данные текущей строки таблицы "Взносы".
// 	ИмяПоляДатаПолученияДохода - имя реквизита содержащего дату получения дохода в таблице взносов.
// 	ИмяПоляПредставление - имя реквизита, содержащего строковое представление даты получения дохода.
//  Направление - параметр события "Регулирование".
//	Модифицированность - булево - признак модифицированности формы.
//
Процедура ВзносыДатаПолученияДоходаСтрокойРегулирование(ДанныеТекущейСтроки, ИмяПоляДатаПолученияДохода, ИмяПоляПредставление, Направление, Модифицированность) Экспорт 
	
	ЗарплатаКадрыКлиент.ВводМесяцаРегулирование(ДанныеТекущейСтроки, ИмяПоляДатаПолученияДохода, ИмяПоляПредставление, Направление, Модифицированность);
	Если ЗначениеЗаполнено(ДанныеТекущейСтроки[ИмяПоляДатаПолученияДохода]) Тогда
		ДанныеТекущейСтроки[ИмяПоляДатаПолученияДохода] = УчетСтраховыхВзносовКлиентСервер.ДатаПолученияДохода(ДанныеТекущейСтроки[ИмяПоляДатаПолученияДохода]);
	КонецЕсли;	
	
КонецПроцедуры


Процедура ОткрытьФормуПодробнееОРасчетеВзносов(Объект, ИмяДокумента, Владелец, ОписаниеДокумента, УчитываемыеСотрудники) Экспорт
	
	ПараметрыФормы = Новый Структура;
	ПараметрыФормы.Вставить("Организация", Объект.Организация);
	ПараметрыФормы.Вставить("СведенияОВзносах", Владелец.СведенияОВзносах());
	ПараметрыФормы.Вставить("ИмяДокумента",	ИмяДокумента);
	ПараметрыФормы.Вставить("МесяцНачисления", Объект[ОписаниеДокумента.МесяцНачисленияИмя]);
	ПараметрыФормы.Вставить("ОписаниеДокумента", ОписаниеДокумента);
	ПараметрыФормы.Вставить("ТолькоПросмотр", Владелец.ТолькоПросмотр);
	ПараметрыФормы.Вставить("УчитываемыеСотрудники", УчитываемыеСотрудники);
	
	ОткрытьФорму("ОбщаяФорма.ПодробнееОРасчетеВзносов", ПараметрыФормы, Владелец);
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

Процедура ВзносыДатаПолученияДоходаСтрокойНачалоВыбораЗавершение(Результат, Параметры) Экспорт 
	Если Результат = Истина Тогда
		ДанныеТекущейСтроки = Параметры.ДанныеТекущейСтроки;
		ИмяПоляДатаПолученияДохода = Параметры.ИмяПоляДатаПолученияДохода;
		
		Если ЗначениеЗаполнено(ДанныеТекущейСтроки[ИмяПоляДатаПолученияДохода]) Тогда
			ДанныеТекущейСтроки[ИмяПоляДатаПолученияДохода] = УчетСтраховыхВзносовКлиентСервер.ДатаПолученияДохода(ДанныеТекущейСтроки[ИмяПоляДатаПолученияДохода]);
		КонецЕсли;	
	КонецЕсли;	
КонецПроцедуры	

#КонецОбласти
