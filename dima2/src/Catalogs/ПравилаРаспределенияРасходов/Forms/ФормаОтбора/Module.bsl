
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	// Пропускаем инициализацию, чтобы гарантировать получение формы при передаче параметра "АвтоТест".
	Если Параметры.Свойство("АвтоТест") Тогда
		Возврат;
	КонецЕсли;
	Если Параметры.Свойство("МассивГруппПродукции") Тогда
		СписокГруппПродукции.ЗагрузитьЗначения(Параметры.МассивГруппПродукции);
		Элементы.Страницы.ТекущаяСтраница = Элементы.СтраницаГруппыПродукции;
		Заголовок = НСтр("ru='Список групп (видов) продукции';uk='Список груп (видів) продукції'")
	ИначеЕсли Параметры.Свойство("МассивМатериалов") Тогда
		СписокМатериалов.ЗагрузитьЗначения(Параметры.МассивМатериалов);
		Элементы.Страницы.ТекущаяСтраница = Элементы.СтраницаМатериалы;
		Заголовок = НСтр("ru='Список материалов';uk='Список матеріалів'")
	ИначеЕсли Параметры.Свойство("МассивВидовРабот") Тогда
		СписокВидовРабот.ЗагрузитьЗначения(Параметры.МассивВидовРабот);
		Элементы.Страницы.ТекущаяСтраница = Элементы.СтраницаВидыРабот;
		Заголовок = НСтр("ru='Список видов работ сотрудников';uk='Список видів робіт співробітників'")
	ИначеЕсли Параметры.Свойство("МассивПодразделений") Тогда
		СписокПодразделений.ЗагрузитьЗначения(Параметры.МассивПодразделений);
		Элементы.Страницы.ТекущаяСтраница = Элементы.СтраницаПодразделения;
		Заголовок = НСтр("ru='Список подразделений';uk='Список підрозділів'")
	Иначе
		Элементы.Страницы.Видимость = Ложь;
	КонецЕсли;
	
	Элементы.СписокГруппПродукцииЗначение.ВыборГруппИЭлементов = ГруппыИЭлементы.Элементы;
	
	МассивТиповНоменклатуры = Новый Массив;
	МассивТиповНоменклатуры.Добавить(Перечисления.ТипыНоменклатуры.Товар);
	МассивТиповНоменклатуры.Добавить(Перечисления.ТипыНоменклатуры.Работа);
	МассивТиповНоменклатуры.Добавить(Перечисления.ТипыНоменклатуры.МногооборотнаяТара);
	
	НовыйПараметр = Новый ПараметрВыбора("Отбор.ТипНоменклатуры", Новый ФиксированныйМассив(МассивТиповНоменклатуры));
	НовыйМассив = Новый Массив();
	НовыйМассив.Добавить(НовыйПараметр);
	НовыеПараметры = Новый ФиксированныйМассив(НовыйМассив);
	
	Элементы.СписокМатериаловЗначение.ПараметрыВыбора = НовыеПараметры;
	
	СобытияФорм.ПриСозданииНаСервере(ЭтаФорма, Отказ, СтандартнаяОбработка);
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура ПеренестиВСправочник(Команда)
	
	МассивДанных = Новый Массив;
	Если Элементы.Страницы.ТекущаяСтраница = Элементы.СтраницаГруппыПродукции Тогда
		СписокДанных = СписокГруппПродукции;
	ИначеЕсли Элементы.Страницы.ТекущаяСтраница = Элементы.СтраницаМатериалы Тогда
		СписокДанных = СписокМатериалов;
	ИначеЕсли Элементы.Страницы.ТекущаяСтраница = Элементы.СтраницаВидыРабот Тогда
		СписокДанных = СписокВидовРабот;
	ИначеЕсли Элементы.Страницы.ТекущаяСтраница = Элементы.СтраницаПодразделения Тогда
		СписокДанных = СписокПодразделений;
	КонецЕсли;
	Для Каждого Элемент Из СписокДанных Цикл
		Если МассивДанных.Найти(Элемент.Значение) = Неопределено
			И ЗначениеЗаполнено(Элемент.Значение) Тогда
			МассивДанных.Добавить(Элемент.Значение);
		КонецЕсли;
	КонецЦикла;
	Закрыть(МассивДанных);
	
КонецПроцедуры

&НаКлиенте
Процедура Подключаемый_ВыполнитьПереопределяемуюКоманду(Команда)
	
	СобытияФормКлиент.ВыполнитьПереопределяемуюКоманду(ЭтаФорма, Команда);
	
КонецПроцедуры

#КонецОбласти
